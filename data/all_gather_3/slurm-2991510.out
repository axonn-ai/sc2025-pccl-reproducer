srun -N 1 -n 8 -c7 --gpus-per-task=1 --gpu-bind=closest python -u benchmark_all_gather.py
PE 0: MPICH CH4 OFI global connections for 8 ranks took 0.00347717 seconds.
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:464] [c10d] The server socket cannot be initialized on [::]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
[W socket.cpp:697] [c10d] The client socket cannot be initialized to connect to [frontier09332.frontier.olcf.ornl.gov]:29500 (errno: 97 - Address family not supported by protocol).
output size = 1 MB
Method = nccl
All-gather bus bw for 8 GPUs is 6.060 GBPS for message output size 1.049 MB
time = 0.151 ms
Method = mpi
All-gather bus bw for 8 GPUs is 4.469 GBPS for message output size 1.049 MB
time = 0.205 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 3.696 GBPS for message output size 1.049 MB
time = 0.248 ms
===============================
output size = 2 MB
Method = nccl
All-gather bus bw for 8 GPUs is 11.495 GBPS for message output size 2.097 MB
time = 0.160 ms
Method = mpi
All-gather bus bw for 8 GPUs is 7.760 GBPS for message output size 2.097 MB
time = 0.236 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 7.050 GBPS for message output size 2.097 MB
time = 0.260 ms
===============================
output size = 4 MB
Method = nccl
All-gather bus bw for 8 GPUs is 21.373 GBPS for message output size 4.194 MB
time = 0.172 ms
Method = mpi
All-gather bus bw for 8 GPUs is 12.217 GBPS for message output size 4.194 MB
time = 0.300 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 13.703 GBPS for message output size 4.194 MB
time = 0.268 ms
===============================
output size = 8 MB
Method = nccl
All-gather bus bw for 8 GPUs is 35.397 GBPS for message output size 8.389 MB
time = 0.207 ms
Method = mpi
All-gather bus bw for 8 GPUs is 17.404 GBPS for message output size 8.389 MB
time = 0.422 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 26.903 GBPS for message output size 8.389 MB
time = 0.273 ms
===============================
output size = 16 MB
Method = nccl
All-gather bus bw for 8 GPUs is 55.254 GBPS for message output size 16.777 MB
time = 0.266 ms
Method = mpi
All-gather bus bw for 8 GPUs is 21.733 GBPS for message output size 16.777 MB
time = 0.675 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 43.037 GBPS for message output size 16.777 MB
time = 0.341 ms
===============================
output size = 32 MB
Method = nccl
All-gather bus bw for 8 GPUs is 71.876 GBPS for message output size 33.554 MB
time = 0.408 ms
Method = mpi
All-gather bus bw for 8 GPUs is 24.701 GBPS for message output size 33.554 MB
time = 1.189 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 59.686 GBPS for message output size 33.554 MB
time = 0.492 ms
===============================
output size = 64 MB
Method = nccl
All-gather bus bw for 8 GPUs is 81.686 GBPS for message output size 67.109 MB
time = 0.719 ms
Method = mpi
All-gather bus bw for 8 GPUs is 26.544 GBPS for message output size 67.109 MB
time = 2.212 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 74.140 GBPS for message output size 67.109 MB
time = 0.792 ms
===============================
output size = 128 MB
Method = nccl
All-gather bus bw for 8 GPUs is 88.172 GBPS for message output size 134.218 MB
time = 1.332 ms
Method = mpi
All-gather bus bw for 8 GPUs is 27.160 GBPS for message output size 134.218 MB
time = 4.324 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 82.235 GBPS for message output size 134.218 MB
time = 1.428 ms
===============================
output size = 256 MB
Method = nccl
All-gather bus bw for 8 GPUs is 90.778 GBPS for message output size 268.435 MB
time = 2.587 ms
Method = mpi
All-gather bus bw for 8 GPUs is 27.527 GBPS for message output size 268.435 MB
time = 8.533 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 85.520 GBPS for message output size 268.435 MB
time = 2.746 ms
===============================
output size = 512 MB
Method = nccl
All-gather bus bw for 8 GPUs is 89.842 GBPS for message output size 536.871 MB
time = 5.229 ms
Method = mpi
All-gather bus bw for 8 GPUs is 27.743 GBPS for message output size 536.871 MB
time = 16.933 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 87.120 GBPS for message output size 536.871 MB
time = 5.392 ms
===============================
output size = 1024 MB
Method = nccl
All-gather bus bw for 8 GPUs is 89.195 GBPS for message output size 1073.742 MB
time = 10.533 ms
Method = mpi
All-gather bus bw for 8 GPUs is 27.780 GBPS for message output size 1073.742 MB
time = 33.820 ms
Method = hybrid
All-gather bus bw for 8 GPUs is 86.125 GBPS for message output size 1073.742 MB
time = 10.909 ms
===============================
{'mpi': [4.468797405385546, 7.759622800958542, 12.217015843183287, 17.403874629167724, 21.73290429624411, 24.701445330564635, 26.54432967312876, 27.159980341050836, 27.527232056581067, 27.742654972639773, 27.780153243767817], 'rccl': [6.0597718698404845, 11.495159836042056, 21.37294062033235, 35.39727506783177, 55.254328995057826, 71.87608004184673, 81.6860872538447, 88.17222551349893, 90.77791648471499, 89.84179876118425, 89.1952063196595], 'hybrid': [3.695537369244319, 7.050303836514192, 13.703006859388475, 26.902971439153387, 43.03663820495949, 59.68633938030529, 74.13976258320974, 82.23519053893418, 85.52020272562171, 87.11967772265355, 86.12466169623343]}
